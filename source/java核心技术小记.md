---
title: javaå°è®°
date: 2020-06-18 15:47:03
tags:
- javaåŸºç¡€
categories:
- ç†è®ºåŸºç¡€
---

#  ç¬¬äº”ç«  ç»§æ‰¿

## 5.1 ç±»ã€è¶…ç±»å’Œå­ç±»

è¶…ç±»å’Œå­ç±»ä¹‹é—´æœ‰æ˜æ˜¾çš„is-aå…³ç³»

### 5.1.1 å®šä¹‰å­ç±»

### 5.1.2 è¦†ç›–æ–¹æ³•

å­ç±»ä¸­ä¸å¯ç›´æ¥è®¿é—®çˆ¶ç±»çš„ç§æœ‰åŸŸï¼Œå¿…é¡»å€ŸåŠ©å…¬ç”¨çš„æ¥å£ï¼Œåœ¨ä½¿ç”¨çˆ¶ç±»çš„æ¥å£æ—¶ï¼Œè¦ç”¨superè°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼›

superä¸thisä¸åŒï¼Œå®ƒä¸æ˜¯å¯¹å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œåªæ˜¯ä¸€ä¸ªæŒ‡ç¤ºç¼–è¯‘å™¨è°ƒç”¨çˆ¶ç±»æ–¹æ³•çš„ç‰¹æ®Šå…³é”®å­—

### 5.1.3 å­ç±»æ„é€ å™¨

- ç”¨superè°ƒç”¨çˆ¶ç±»æ„é€ å™¨
- å­ç±»æ²¡æœ‰æ˜¾ç¤ºåœ°è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œä¼šéšå¼è°ƒç”¨çˆ¶ç±»ä¸å¸¦å‚æ•°çš„æ„é€ å™¨ï¼Œå¦‚æœæ­¤æ„é€ å™¨åœ¨çˆ¶ç±»æ²¡æœ‰å®šä¹‰ï¼Œä¼šå‡ºç°å¼‚å¸¸

### 5.1.4 ç»§æ‰¿å±‚æ¬¡

### 5.1.5 å¤šæ€

- is-aè§„åˆ™ï¼Œå³ç½®æ¢æ³•åˆ™ï¼Œè¡¨æ˜ç¨‹åºä¸­å‡ºç°è¶…ç±»å¯¹è±¡çš„åœ°æ–¹éƒ½å¯ä»¥ç”¨å­ç±»å¯¹è±¡ç½®æ¢
- ä¸èƒ½å°†ä¸€ä¸ªè¶…ç±»çš„å¼•ç”¨å¯¹è±¡èµ‹ç»™å­ç±»å˜é‡ï¼ˆä¸ªäººï¼šé™¤éé‡‡ç”¨å¼ºåˆ¶è½¬å‹ä¸”è¯¥è¶…ç±»å¯¹è±¡çš„å®é™…å¯¹è±¡ä¸ºå­ç±»å¯¹è±¡ï¼‰
- è§æ ¸å¿ƒæŠ€æœ¯ç¬¬10ç‰ˆ155é¡µï¼›å­ç±»æ•°ç»„çš„å¼•ç”¨å¯ä»¥è½¬æ¢æˆè¶…ç´¯æ•°ç»„å¾—å¼•ç”¨ï¼Œè€Œä¸éœ€è¦é‡‡ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è¿™æ ·åšä¼šå¼•å‘é£é™©ã€‚
- è§æ ¸å¿ƒæŠ€æœ¯ç¬¬10ç‰ˆ154é¡µï¼›å’Œä¸Šä¸€æ¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚è¿™ä¸€æ¡ä¸­æŠŠå˜é‡å½“ä½œè¶…ç±»å°±ç”¨è¶…ç±»ä¸­çš„æ–¹æ³•ï¼Œå½“ä½œå­ç±»å°±ç”¨å­ç±»ä¸­çš„æ–¹æ³•ï¼Œæ²¡æ¯›ç—…ï¼›è€Œåœ¨ä¸Šä¸€æ¡æ•°ç»„æƒ…å†µä¸­ï¼Œå´æ²¡æœ‰åŠæ³•å®ç°ï¼Œå› ä¸ºå¦‚æœåœ¨æ•°ç»„ä¸­åŠ å…¥ä¸€ä¸ªè¶…ç±»å®ä¾‹ï¼Œåœ¨å­ç±»æ•°ç»„è°ƒç”¨è¯¥å®ä¾‹è°ƒç”¨å­ç±»æ–¹æ³•å°±ä¼šå‡ºé—®é¢˜ã€‚

### 5.1.6 ç†è§£æ–¹æ³•è°ƒç”¨

- é™æ€ç»‘å®šå’ŒåŠ¨æ€ç»‘å®š
- æ–¹æ³•è¡¨çš„ä½¿ç”¨

### 5.1.7 é˜»æ­¢ç»§æ‰¿ï¼šfinalç±»å’Œæ–¹æ³•

åŒæ—¶è¿˜å¯ä»¥é˜»æ­¢åŠ¨æ€ç»‘å®š

###  5.1.8  å¼ºåˆ¶ç±»å‹è½¬æ¢

instanceofå…³é”®å­—

### 5.1.9 æŠ½è±¡ç±»

æŠ½è±¡ç±»ä¸å¯å®ä¾‹åŒ–ï¼›æ²¡æœ‰æŠ½è±¡æ–¹æ³•ä¹Ÿå¯ä»¥æˆä¸ºæŠ½è±¡ç±»

### 5.1.10 å—ä¿æŠ¤çš„è®¿é—®

Objectç±»ä¸­çš„cloneæ˜¯å…¸å‹çš„protectedæ–¹æ³•

<hr/>

## 5.2 Objectï¼š æ‰€æœ‰ç±»çš„è¶…ç±»

åŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡

### 5.2.1 equals æ–¹æ³•

ä¸ºäº†é˜²æ­¢nullçš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨Objectçš„equalsæ–¹æ³•ï¼Œå¦‚ æœä¸¤ä¸ªå‚æ•°éƒ½ä¸º nullï¼Œ Objects.equals(aï¼Œb) è°ƒç”¨å°†è¿”å› true ; å¦‚æœå…¶ä¸­ä¸€ä¸ªå‚æ•°ä¸º null, åˆ™è¿”å› false ; å¦åˆ™ï¼Œ å¦‚æœä¸¤ä¸ªå‚æ•°éƒ½ä¸ä¸º nullï¼Œ åˆ™è°ƒç”¨ a.equals(b)

### 5.2.2 ç›¸ç­‰æµ‹è¯•ä¸ç»§æ‰¿

- è‡ªåæ€§ï¼Œå¯¹ç§°æ€§ï¼Œä¼ é€’æ€§ï¼Œä¸€è‡´æ€§ï¼Œå¯¹äºä»»æ„éç©ºxï¼Œä¸nullè¿›è¡Œequalsè¿”å›false

- ç”±å­ç±»å†³å®šç›¸ç­‰æ¦‚å¿µï¼Œå¤„äºå¯¹ç§°æ€§éœ€é‡‡ç”¨getClassï¼Œç”±è¶…ç±»å†³å®šå¯ä½¿ç”¨instanceof

- ç¼–å†™equalsçš„å®Œç¾æµç¨‹

### 5.2.3 hashCode æ–¹æ³•

é‡æ–°å®šä¹‰equalsæ—¶è¦é‡æ–°å®šä¹‰hashCodeæ–¹æ³•ï¼Œå¦‚æœequalsä¸ºtrueï¼Œå“ˆå¸Œå€¼ä¹Ÿåº”å½“ç›¸åŒ

### 5.2.4 toString æ–¹æ³•

<hr/>

## 5.4 åŒ…è£…å™¨ä¸è‡ªåŠ¨è£…ç®±

<hr/>

## 5.5 å‚æ•°å¯å˜çš„æ–¹æ³•

<hr/>

## 5.6 æšä¸¾ç±»

<hr/>

## 5.7 åå°„

### 5.7.1 Classç±»

æŸç±».class  æŸå¯¹è±¡.getClass()  Class.forName()

### 5.7.3 ç”¨æŸäº›åå°„ç±»åˆ†æ

Classç±»  getFieldsã€getMethodsã€getConstructors  å•å¤æ•°ï¼ŒDeclared

Modifierç±»ï¼štoStringæ–¹æ³•

Fieldã€Methodã€Constructorç±»  ï¼šgetModifiers è¿”å›int  getName,  getReturnType

### 5.7.4 åœ¨è¿è¡Œæ—¶ä½¿ç”¨åå°„åˆ†æå¯¹è±¡

è·å¾—Fieldå¯¹è±¡ï¼Œä¼ å…¥å¼•ç”¨å˜é‡ä½¿ç”¨getã€setæ–¹æ³•

### 5.7.5 ä½¿ç”¨åå°„ç¼–å†™æ³›å‹æ•°ç»„ä»£ç 

ä¸å¥½çš„ç¤ºèŒƒï¼š

```java
public static Object[] badCopyOf(Object[] a, int newLength) // not useful
{
	Object[] newArray = new Object[newlength];
    System.arraycopy(a, 0, newArray, 0, Math.min(a.length, newLength)); 
    return newArray;
} 
```

ä¸ªäººï¼šObject[]æ— æ³•**å‘ä¸‹è½¬å‹**ï¼ï¼å› ä¸ºä¸€å¼€å§‹å°±æ˜¯å®šä¹‰çš„Objectï¼

```java
//æ›´å¥½çš„åšæ³•
public static Object goodCopyOf(Object a, int newLength)
{
   Class cl = a.getClass()ï¼› 
   if (cl.isArrayO) return null; 
   Class componentType = cl.getComponentType0ï¼› 
   int length = Array.getLength(a); 
   Object newArray = Array.newlnstance(componentType, newLength):                    
   System.arraycopy(a, 0, newArray, 0, Math.min(length, newLength)); 
   return newArray; 
}
```

```java
int a = {1ï¼Œ2, 3, 4, 5 }; a = (int[]) goodCopyOf(a, 10);
```

### 5.7.6 è°ƒç”¨ä»»æ„æ–¹æ³•

Methodç±»ä¸­çš„invoke   Object invoke(Object obj, Object..args)

å¯¹äºé™æ€æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°å¿½ç•¥ï¼Œ

```java
Method ml = Employee.class.getMethod("getName"); 
Method m2 = Employee.class.getMethod("raiseSalary", double.class);
// double.class!=Double.class!!
```

æ³¨æ„è½¬å‹

<hr/>

# ç¬¬å…­ç«  æ¥å£ã€lambdaè¡¨è¾¾å¼ä¸å†…éƒ¨ç±»

## 6.1 æ¥å£

### 6.1.1 æ¥å£çš„æ¦‚å¿µ

"å¦‚æœéµä»æŸä¸ªç‰¹å®šçš„æ¥å£ï¼Œé‚£ä¹ˆå°±å±¥è¡Œè¿™é¡¹æœåŠ¡";

æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•éƒ½è‡ªåŠ¨åœ°å±äºpublic;

```java
//ç»å…¸æ¥å£ Comparableï¼š
public interface Comparable{
    public int compareTo(Object other);
}
```

```java
//java8åå·²ç»å®ç°äº†æ³›å‹
public interface Comparable<T>{
    public int compateTo(T other);
}
```

```java
//ä¸¤ä¸ªå¸¸ç”¨æ–¹æ³•
Integer.compare(int x, int y)
Double.compare(double x, double y)
```

compareæ–¹æ³•é¢ä¸´ä¸equalsä¸€æ ·çš„é—®é¢˜ï¼Œå³æ˜¯å­ç±»å®šä¹‰ç›¸ç­‰æ¦‚å¿µè¿˜æ˜¯çˆ¶ç±»å®šä¹‰ï¼›

å¦‚æœå­ç±»å®šä¹‰éœ€è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œç±»å‹ä¸ç¬¦æŠ›å‡ºå¼‚å¸¸ï¼›

çˆ¶ç±»å®šä¹‰å¯å£°æ˜ä¸€ä¸ªfinalæ–¹æ³•

### 6.1.2 æ¥å£çš„ç‰¹æ€§

```java
//æ¥å£å¯ä»¥åƒç±»ä¸€æ ·ç»§æ‰¿ï¼Œç§°ä¹‹ä¸ºæ‰©å±•
public interface Moveable{
    void move(double x, double y);
}

public interface Powered extends Moveable{
    double milePerGallon();
    double SPEED_LIMIT = 95;
}
//æ¥å£ä¸­ä¸èƒ½åŒ…å«å®åŠ›åŸŸæˆ–è€…é™æ€æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥å®šä¹‰å¸¸é‡ï¼Œ é»˜è®¤ä¸ºpublic static final
```

### 6.1.3 æ¥å£ä¸æŠ½è±¡ç±»

é—®ï¼šæ—¢ç„¶æœ‰ç±»å¯ä»¥ç»§æ‰¿ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦æ¥å£å‘¢ï¼Ÿ

ç­”ï¼šå› ä¸ºjavaä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œæ¯ä¸ªç±»åªèƒ½æœ€å¤šæœ‰ä¸€ä¸ªçˆ¶ç±»ï¼Œè€Œæ¥å£å¯ä»¥å®ç°å¤šä¸ªã€‚

### 6.1.4 é™æ€æ–¹æ³•

java8åå¯ä»¥åœ¨æ¥å£ä¸­å®ç°é™æ€æ–¹æ³•ï¼Œâ€œç†è®ºä¸Šæ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯èƒŒç¦»äº†æ¥å£è®¾è®¡çš„åˆè¡·â€ã€‚

```java
public interface Path{
    public static Path get(String first, String...more){
        return FileSystems.getDefault().getPath(first, more);
    }
    ...
}
```

### 6.1.5 é»˜è®¤æ–¹æ³•

é—®ï¼šå•¥æ˜¯é»˜è®¤æ–¹æ³•ï¼Ÿ

ç­”ï¼š ç”¨**default** å…³é”®å­—ä¸ºæ¥å£ä¸­çš„æ–¹æ³•æ·»åŠ é»˜è®¤å®ç°

```java
//ä¾‹å¦‚
public interface Comparable<T>{
    default int compareTo(T other){return 0;}
}
//è¿™è¿˜æš‚æ—¶çœ‹ä¸å‡ºæ¥æœ‰ä»€ä¹ˆç”¨
```

é—®ï¼šè¿™æœ‰å•¥ç”¨å¤„ï¼Ÿ

ç­”ï¼šç”¨å¤„å¦‚ä¸‹ï¼š

```java
public interface MouseListener{
    default void mouseClicked(MouseEvent event){}
    default void mousePressed(MouseEvent event){}
    default void mouseReleased(MouseEvent event){}
    default void mouseEntered(MouseEvent event){}
}
// æ·»åŠ äº†é»˜è®¤æ–¹æ³•åï¼Œåªå…³æ³¨å…¶ä¸­éœ€è¦çš„æ–¹æ³•å°±å¯ï¼Œå…¶ä½™æ–¹æ³•æœ‰äº†é»˜è®¤å®ç°ä¸ç”¨å…³å¿ƒ
```

```java
public interface Collection{
    int size();
    default boolean isEmpty(){
        return size()==0;
    }
}
//è¿™æ ·å­ç±»å°±ä¸ç”¨å…³å¿ƒisEmptyçš„å®ç°äº†ï¼Œæœ‰ç‚¹è¶…ç±»æ–¹æ³•ç»§æ‰¿çš„æ„æ€
```

```java
//åœ¨ JavaAPI ä¸­ï¼Œä½ ä¼šçœ‹åˆ°å¾ˆå¤šæ¥å£éƒ½æœ‰ç›¸åº”çš„ä¼´éšç±»ï¼Œè¿™ä¸ªä¼´éšç±»ä¸­å®ç°äº†ç›¸åº”æ¥å£çš„éƒ¨åˆ†æˆ–æ‰€æœ‰æ–¹æ³•ï¼Œ å¦‚CoUection/AbstractCollectkmæˆ– MouseListener/MouseAdapterã€‚åœ¨ JavaSE 8 ä¸­ï¼Œ è¿™ä¸ªæŠ€æœ¯å·²ç»è¿‡æ—¶ã€‚ç°åœ¨å¯ä»¥ç›´æ¥åœ¨æ¥å£ä¸­å®ç°æ–¹æ³•ã€‚ 
```

```java
//é»˜è®¤æ–¹æ³•å¯ç”¨äºæ¥å£æ¼”åŒ–ã€‚å³åœ¨æ¥å£ä¸­æ–°å¢æ–¹æ³•æ—¶ï¼Œå¯ä»¥è®¾ç½®ä¸ºé»˜è®¤æ–¹æ³•ï¼Œé‚£æ ·åœ¨æ—§ç‰ˆæœ¬ä¸­å®ç°äº†æ­¤æ¥å£åˆä¸éœ€è¦æ–°æ–¹æ³•çš„ç±»å°±å¯ä»¥å…é­å…¶å®³ã€‚
```

### 6.1.6 è§£å†³é»˜è®¤æ–¹æ³•çš„å†²çª

é—®ï¼šä»€ä¹ˆæ˜¯é»˜è®¤æ–¹æ³•å†²çªï¼Ÿ

ç­”ï¼šä¸€ä¸ªæ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ä¸å…¶å®ƒè¶…ç±»ä¸­çš„æ–¹æ³•æˆ–å…¶å®ƒæ¥å£ä¸­çš„æ–¹æ³•ï¼ˆä¸ä¸€å®šè¦é»˜è®¤ï¼‰ç›¸åŒã€‚

é—®ï¼šæ€ä¹ˆè§£å†³ï¼Ÿ

ç­”ï¼šä¸¤æ¡åŸåˆ™ï¼š

```java
   -  è¶…ç±»ä¼˜å…ˆï¼šå¾ˆå¥½ç†è§£ï¼Œæ¥å£è¦æ±‚å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œç»§æ‰¿äº†è¶…ç±»çš„æ–¹æ³•æ­£å¥½å°±å®ç°äº†ï¼Œå¤©ä¸Šæ‰é¦…é¥¼ï¼›
   -  æ¥å£å†²çªæ—¶ï¼šç”±ç¨‹åºå‘˜æŒ‡å®šã€‚
```

<hr/>

## 6.2 æ¥å£ç¤ºä¾‹

### 6.2.1 æ¥å£ä¸å›è°ƒ

> é€šè¿‡ç±»åå¯¼å…¥äº†java.swing.Timerã€‚è¿™å°±æ¶ˆé™¤äº†javax.swing.Timerä¸java.util.Timerä¹‹é—´äº§ç”Ÿçš„äºŒä¹‰æ€§

### 6.2.2 Comparatoræ¥å£

```java
//ç»å…¸çš„æ¯”è¾ƒå™¨æ¥å£ï¼Œå¸¸ç”¨äºæ’åº
public interface Compatator<T>{
    int compare(T first, T second);
}
```

### 6.2.3 å¯¹è±¡å…‹éš†

é—®ï¼šå…‹éš†æ–¹æ³•çš„éš¾ç‚¹åœ¨å“ªï¼Ÿ

ç­”ï¼šåœ¨äºå¼•ç”¨å˜é‡çš„æ‹·è´ã€‚å¯¹äºä¸å¯å˜å˜é‡æ¥è¯´ï¼Œæ›´æ”¹å…‹éš†å¯¹è±¡åªä¼šåˆ›é€ ä¸€ä¸ªæ–°å˜é‡ï¼Œå¯¹äºåŸå¯¹è±¡ä¸­çš„å˜é‡æ²¡æœ‰å½±å“ï¼›å¯¹äºå¼•ç”¨å˜é‡æ¥è¯´ï¼Œæ”¹å˜å…‹éš†å¯¹è±¡ä¸­å˜é‡åŒæ—¶ä¼šæ”¹å˜åŸå¯¹è±¡ä¸­çš„å˜é‡ã€‚å› æ­¤éœ€è¦æ·±å¤åˆ¶ã€‚

é—®ï¼šå…³äºCloneableæ¥å£ï¼Ÿ

ç­”ï¼šè¿™æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œæœ¬èº«ä¸åŒ…å«ä»»ä½•æ–¹æ³•ï¼Œä½†æ˜¯å‡¡æ˜¯å®ç°äº†cloneæ–¹æ³•çš„ç±»å¿…é¡»å®ç°è¯¥æ¥å£ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

é—®ï¼šå…³äºå­ç±»å®ç°cloneæ–¹æ³•ï¼Ÿ

ç­”ï¼šæˆ‘ä¸ªäººè®¤ä¸ºï¼Œè¿™è·Ÿé€’å½’å·®ä¸å¤šï¼Œè§ä¸‹é¢ä»£ç ï¼š

```java
class Employee implements Cloneable{
	...
    Employee clone() throws CloneNotSupportException
    {
        Employee cloned = (Employee) super.clone();
        cloned.hireDay = (Date) hireDay.clone();
        return cloned;
    }
}
```

é—®ï¼šä½ è¿˜ä¼šäº†ä»€ä¹ˆï¼Ÿ

ç­”ï¼šå…‹éš†å¹¶ä¸å¸¸ç”¨ï¼Œæ ‡å‡†åº“åªæœ‰ä¸åˆ°5%çš„ç±»å®ç°äº†æ­¤æ–¹æ³•ï¼›æ‰€æœ‰æ•°ç»„éƒ½æœ‰ä¸€ä¸ªpublicçš„cloneæ–¹æ³•

<hr/>

## 6.3 lambdaè¡¨è¾¾å¼

### 6.3.1 ä¸ºä»€ä¹ˆå¼•å…¥lambdaè¡¨è¾¾å¼

```java
public LengthComparator implements Comparator<String>
{
    public int compare(String first, String second){
        return first.length() - second.length();
    }
}
...
Arrays.sort(String, new LenthComparator());
//åœ¨ä¸Šè¿°ä»£ç ä¸­éœ€è¦ç»™sortæ–¹æ³•é‡æ–°ä¼ å…¥ä¸€ä¸ªComparatorï¼Œå› æ­¤åœ¨ç¼–è¾‘å®ŒLengthComparatorç±»ä¹‹å
//è¿˜è¦newä¸€ä¸ªå¯¹è±¡åœ¨ä¼ å‚
//è€Œæˆ‘ä»¬çœŸæ­£éœ€è¦çš„åªæ˜¯æ–°å®šä¹‰çš„æ’åºè§„åˆ™è€Œå·²
//labmdaçš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ å…¥ä»£ç å—è€Œä¸éœ€è¦æ–°å»ºå¯¹è±¡
```

### 6.3.2 lambdaè¡¨è¾¾å¼çš„è¯­æ³•

```java
//åªéœ€è¦ä¸€ä¸ªè¡¨è¾¾å¼
(String first, String second)->first.length()-second.length()
//éœ€è¦å¤šä¸ªè¡¨è¾¾å¼, ç”¨å¤§æ‹¬å·æ‹¬å·
(String first, String second)->
{
    if(first.length()<second.length()) return -1;
    else if(first.length()>second.length()) return 1;
    else return 0;
}
//æ²¡æœ‰å‚æ•°ï¼Œä¹Ÿéœ€è¦æ‹¬å·
()->{for(int i=0;i<5;i++)System.out.println(i);}
//å¦‚æœå¯ä»¥æ¨å¯¼å‡ºå‚æ•°ç±»å‹ï¼Œå¯ä»¥å¿½ç•¥å…¶ç±»å‹
//å¦‚æœå¯ä»¥æ¨å¯¼ç±»å‹ä¸”ä¸”åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœç•¥åœ†æ‹¬å·
//æ— éœ€åˆ¶å®šlambdaè¿”å›å€¼çš„ç±»å‹
```

### 6.3.3 å‡½æ•°å¼æ¥å£

é—®ï¼šä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ï¼Ÿ

ç­”ï¼šå¯¹äºåªæœ‰ä¸€ä¸ª**æŠ½è±¡æ–¹æ³•**çš„æ¥å£ï¼Œéœ€è¦è¿™ç§æ¥å£çš„å¯¹è±¡æ—¶ï¼Œå°±å¯ä»¥æä¾›ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œè¿™ç§æ¥å£ç§°ä¸ºå‡½æ•°å¼æ¥å£ã€‚

### 6.3.4 æ–¹æ³•å¼•ç”¨

```java
object::instanceMethod
Class::staticMethod
Class::instanceMethod
//å‰ä¸¤ç§æƒ…å†µä¸­ï¼Œç›´æ¥å°†å˜é‡ä½œä¸ºå‚æ•°ä¼ é€’ç»™æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š
//Math::pow ç­‰ä»·äº(x, y)->Math.pow(x, y)
//æœ€åä¸€ç§æƒ…å†µï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¼šæˆä¸ºè°ƒç”¨æ–¹æ³•çš„å®ä¾‹ï¼Œä¾‹å¦‚ï¼š
//String::compareToIgnoreCaseç­‰ä»·äº(x, y)->x.compareToIgnoreCase(y)
//ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ°åœ¨é‡æ„çš„æ–¹æ³•ä¸­æ‰¾åˆ°å®é™…éœ€è¦çš„æ–¹æ³•
//ä½¿ç”¨thiså‚æ•°ï¼Œä¾‹å¦‚ï¼š
//this::equals ç­‰ä»·äº x->x.equals(x)
//ä½¿ç”¨superå‚æ•°ï¼Œä¸ªäººï¼šåŒthiså·®ä¸å¤šï¼Œåªä¸è¿‡æ–¹æ³•ä¼šæ›¿æ¢æˆè¶…ç±»ä¸­çš„æ–¹æ³•
```

### 6.3.5 æ„é€ å™¨çš„å¼•ç”¨

```java
ArrayList<String> names = ....;
Stream<Person> stream = names.stream().map(Person::new);
int[]::new ç­‰ä»·äº x->new int[x]
//è¿˜ä¸å¤ªæ˜ç™½ï¼Œä»¥åå†è¯´å§
```

### 6.3.6 å˜é‡ä½œç”¨åŸŸ

```java
//å¯ä»¥åœ¨lambdaè¡¨è¾¾å¼ä¸­è®¿é—®å¤–å›´å˜é‡
public static void repeatMessage(String text, int delay)
{
    ActionListener listener = event ->
    {
        System.out.println(text);
    };
}//è®¿é—®text
```

```java
//åœ¨lambdaè¡¨è¾¾å¼ä¸­å¼•ç”¨çš„å¤–å›´å˜é‡ä¸å¯æ”¹å˜
public static void countDown(int start, int delay)
{
	ActionListener listener = event->
    {
        start--;
        System.out.println(start);
    };
}//è¿™æ ·æ˜¯é”™çš„ï¼ï¼ï¼

public static void repeat(String text, int count)
{
    for(int i=0;i<10;i++){
        ActionListener listener = event->
        {
            System.out.println(i);
        };
    }
}//è¿™æ ·ä¹Ÿæ˜¯é”™çš„ï¼ï¼
//è¿™ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢åœ¨å¹¶å‘æ‰§è¡Œä¸­å‡ºé”™
```

```java
//åœ¨lambdaä¸­å£°åä¸€ä¸ªä¸å±€éƒ¨å˜é‡åŒåçš„å‚æ•°æˆ–è€…å±€éƒ¨å˜é‡æ˜¯éæ³•çš„
Path first = Paths.get("/usr/bin")
Comparator<String> comp = 
    (first, second)->first.length()-second.length();
//Error!!!!!
```

```java
//åœ¨lambdaä½¿ç”¨thisä½¿ï¼Œæ˜¯æŒ‡åˆ›å»ºè¿™ä¸ªè¡¨è¾¾å¼çš„æ–¹æ³•çš„thiså‚æ•°
public class Application{
    public void init(){
        ActionListener listener = event ->
        {
            System.out.println(this.toString())
        };
    }
}
//è°ƒç”¨Applicationå¯¹è±¡çš„toStringæ–¹æ³•
```

### 6.3.7 å¤„ç†lambdaè¡¨è¾¾å¼

- åˆ—ä¸¾äº†ä¸€äº›å‡½æ•°å¼æ¥å£
- lambdaçš„ç‰¹å¾æ˜¯å»¶è¿Ÿæ‰§è¡Œ
- Predicate.isEqual(a)ç­‰åŒäºa::equalsï¼ŒPredicateçš„æºç 

### 6.3.8 å†è°ˆComparator

å„ç§éªšæ“ä½œï¼Œæš‚æ—¶æŒ‰ä¸‹ä¸è¡¨

<hr/>

## 6.4 å†…éƒ¨ç±»

é—®ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»å‘¢ï¼Ÿ

ç­”ï¼šå¥½å¤„å¤šå¤šï¼š

1. å†…éƒ¨ç±»å¯ä»¥è®¿é—®è¯¥ç±»å®šä¹‰çš„æ‰€åœ¨ä½œç”¨åŸŸä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬ç§æœ‰çš„æ•°æ®ï¼›
2. å†…éƒ¨ç±»å¯ä»¥å¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»éšè—èµ·æ¥ï¼›
3. å½“æƒ³å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸”ä¸æƒ³ç¼–å†™å¤§é‡ä»£ç æ—¶ï¼Œä½¿ç”¨åŒ¿åå†…éƒ¨ç±»æ¯”è¾ƒæ–¹ä¾¿ã€‚

### 6.4.1 ä½¿ç”¨å†…éƒ¨ç±»è®¿é—®å¯¹è±¡çš„çŠ¶æ€

```java
public class TalkingClock
{
    private int interval;
    private boolean beep;
    public TalkingClock(int interval, boolean beep){
        this.interval = interval;
        this.beep = beep;
    }
    public void start(){
        ActionListener listener = new TimePrinter();
        Time t = new Timer(interval, listener);
        t.start();
    }
    public class TimePrinter implements ActionListener{
        System.out.println("At the tone, the time is" + new Date());
        if(beep) Toolit.getDefaultToolkit().beep();
    }
}
//æ­£å¦‚ä»£ç æ‰€æ˜¾ç¤ºçš„ï¼Œå†…éƒ¨ç±»TimePrinterè®¿é—®äº†TalkingClockçš„ç§æœ‰å˜é‡beep
```

![image-20200619174251452](../img/image-20200619174251452.png)

```java
//actionPerformedæ–¹æ³•ç­‰ä»·äºä¸‹åˆ—å½¢å¼
public void actionPerformed(ActionEvent event)
{
    System.out.println("At the tone, the time is" + new Date());
    if(outer.beep) Toolkit.getDefaultToolkit().beep();
}
//outerå¹¶ä¸æ˜¯javaçš„å…³é”®å­—ï¼Œæˆ‘ä»¬åªæ˜¯ç”¨æ¥è¯´æ˜æœºåˆ¶
```

```java
//ç¼–è¯‘å™¨å®é™…ä¸Šä¿®æ”¹äº†å†…éƒ¨ç±»çš„æ„é€ å™¨ï¼Œç»™äºˆäº†ä¸€ä¸ªå¤–å›´ç±»çš„å¼•ç”¨å‚æ•°
public TimePrinter(TalkingClock clock)
{
    outer = clock;
}
```

```java
//å†…éƒ¨ç±»å¯ä»¥å£°æ˜ä¸ºç§æœ‰çš„ï¼Œè¿™æ ·åªæœ‰å¤–å›´ç±»å¯ä»¥å£°æ˜å†…éƒ¨ç±»å¯¹è±¡
```

### 6.4.2 å†…éƒ¨ç±»çš„ç‰¹æ®Šè¯­æ³•è§„åˆ™

```java
//å®é™…ä¸Šå¤–å›´ç±»å¼•ç”¨çš„æ­£è§„è¯­æ³•æ˜¯è¿™æ ·çš„ï¼šOuterClass.this
public void actionPerformed(ActionEvent event){
    ...
    if(Talking.this.beep) Toolkit.getDefaultToolkit().beep();
}
```

```java
//å¯ä»¥é‡‡ç”¨æ­¤ç§è¯­æ³•æ„é€ å†…éƒ¨ç±»ï¼šouterObject.new InnerClass(constructor params)
ActionListener listener = this.new TimePrinter()
```

```java
//åœ¨å¤–å›´çš„ä½œç”¨åŸŸä¹‹å¤–ï¼Œå¯ä»¥è¿™æ ·å¼•ç”¨å†…éƒ¨ç±»(å†…éƒ¨ç±»æ˜¯privateåˆ™ä¸å¯è®¿é—®(ä¸ªäºº))
TalkingClock jabberer = new TalkingClock(1000, true);
TalkingClock.TimePrinter listener = jabberer.new TimePrinter();
//å­˜ç–‘ï¼šé™æ€å†…éƒ¨ç±»æ˜¯ä¸æ˜¯ä¸ä¸€æ ·ï¼Ÿ
//å†…éƒ¨ç±»ä¸­æ‰€æœ‰é™æ€åŸŸå¿…é¡»æ˜¯finalï¼›
//å†…éƒ¨ç±»ä¸èƒ½æœ‰staticæ–¹æ³•ï¼ŒJavaè¯­è¨€è§„èŒƒæ²¡æœ‰ä»»ä½•è§£é‡Š
```



### 6.4.3 å†…éƒ¨ç±»æ˜¯å¦æœ‰ç”¨ã€å¿…è¦å’Œå®‰å…¨

```java
//å¯¹äºå†…éƒ¨ç±»TimePrinterè°ƒç”¨ReflectionTestç¨‹åºæ‰“å°ä¸‹åˆ—å†…å®¹
public class TalkingClockSTimePrinter { 
    public TalkingClock$TimePrinter(TalkingCtock);
    public void actionPerformed(java.awt.event.ActionEvent);
	final TalkingClock this$0;//å¯ä»¥çœ‹åˆ°ä¿å­˜äº†å¤–å›´ç±»å¼•ç”¨ï¼Œ
}//ä¸ªäººï¼šåœ¨é™æ€ç±»ä¸­ä¸éœ€è¦å¼•ç”¨å¤–å›´ç±»å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥è®¾ä¸ºé™æ€
```



### 6.4.4 å±€éƒ¨å†…éƒ¨ç±»

```java
//TimePrinterè¿™ä¸ªç±»åªåœ¨startæ–¹æ³•ä¸­ç”¨äº†ä¸€æ¬¡ï¼Œå› æ­¤å®Œå…¨å¯ä»¥å®šä¹‰æˆå±€éƒ¨å†…éƒ¨ç±»
public void start(){
    class TimePinter implements ActionListener{
        public void actionPerformed(ActionEvent event){
            System.out.println("At the tone, the time is" + new Date());
            if(beep) Toolkit.getDefaultToolkit().beep();
        }
    }
    ActionListener listener = new TimePrinter();
    Timer t = new Timer(interva, listener);
    t.start();
}
```

### 6.4.5 ç”±å¤–éƒ¨æ–¹æ³•è®¿é—®å˜é‡

```java
//ä¸å…¶å®ƒå†…éƒ¨ç±»ç›¸æ¯”ï¼Œå±€éƒ¨å†…éƒ¨ç±»ä¸ä»…å¯ä»¥è®¿é—®åŒ…å«å®ƒä»¬çš„å¤–éƒ¨ç±»ï¼Œè¿˜å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡
//å¯¹ä¸Šä¸€èŠ‚çš„ä»£ç ä¸­åšä¸€äº›å°æ”¹åŠ¨ï¼Œæ·»åŠ å±€éƒ¨å˜é‡ï¼Œåœ¨å±€éƒ¨å†…éƒ¨ç±»ä¸­è®¿é—®å˜é‡beep
public void start(int interval, boolean beep){
    class TimePinter implements ActionListener{
        public void actionPerformed(ActionEvent event){
            System.out.println("At the tone, the time is" + new Date());
            if(beep) Toolkit.getDefaultToolkit().beep();
        }
    }
    ActionListener listener = new TimePrinter();
    Timer t = new Timer(interva, listener);
    t.start();
}
//ï¼ï¼éœ€è¦æ³¨æ„ï¼Œå±€éƒ¨å†…éƒ¨ç±»å¼•ç”¨çš„å˜é‡äº‹å®ä¸Šä¸ºfinalï¼Œä¸€æ—¦èµ‹å€¼å°±ä¸å¯æ”¹å˜
//å½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶çš„æ—¶å€™ï¼Œå±€éƒ¨å˜é‡å°±ä¼šè¢«ä¼ é€’è¢«æ„é€ å™¨ï¼Œå¹¶å‚¨å­˜åœ¨ä¸€ä¸ªfinalå˜é‡ä¸­
//åˆ©ç”¨ä¸Šä¸€ç« ä¸­çš„åå°„æ£€æŸ¥ç¨‹åºReflectionTestï¼Œä¼šçœ‹åˆ°ä¸‹é¢ç»“æœ
public TalkingClock$TimePrinter
{
    TalkingClock$TimePrinter(TalkingClock, boolean);
    public void actionPerformed(java.awt.event.ActionEvent);
    final boolean val$beep;  //å‚¨å­˜åœ¨æ­¤
    final TalkingClock this$0;
}
//æ‰€ä»¥å¯ä»¥å°†å¼•ç”¨çš„å±€éƒ¨å˜é‡å®šä¹‰ä¸ºfinalï¼Œä½¿å¾—å®ƒåœ¨åˆå§‹åŒ–åä¸å±€éƒ¨ç±»å†…å»ºç«‹çš„æ‹·è´å§‹ç»ˆä¸€è‡´
```

```java
//è¿™ä¸ªä¾‹å­ä¸­å±€éƒ¨å˜é‡å‘ç”Ÿäº†æ”¹å˜ï¼Œæ˜¯é”™è¯¯çš„
int counter = 0;
Date[] dates = new Date[100];
for(int i=0;i<dates.length;i++){
    dates[i] = new Date(){
        public int compareTo(Date other)
        {
            counter++;  //é”™è¯¯ï¼ï¼
            return super.compareTo(other);
        }
    };
}
Arrays.sort(dates);
//å¯ä»¥ç”¨é•¿åº¦ä¸º1çš„æ•°ç»„è¡¥æ•‘ï¼Œfinalå¯¹å¼•ç”¨å˜é‡æ¥è¯´åªæ˜¯æŒ‡å‘æ€§ä¸å˜
int[] counter = new int[1];
...
for(....){
    dates[i] = new Date(){
      public int compareTo(Date other)
      {
          counter[0]++;
          .....
      }
    };
}
....
```



### 6.4.6 åŒ¿åå†…éƒ¨ç±»

```java
//å‡å¦‚å±€éƒ¨å†…éƒ¨ç±»åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¸éœ€è¦å‘½åäº†ï¼Œå¯ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»
public void start(int interval, boolean beep) { 
    ActionListener listener = new ActionListener()
    { 
        public void actionPerformed(ActionEvent event) { 
            System.out.println("At the tone, the time is " + new DateO); 
            if (beep) Toolkit.getDefaultToolkit().beep(); 
        } 
    };
    Timer t = new Timer(interval, listener); 
    t.start();
}
//é€šå¸¸çš„è¯­æ³•æ ¼å¼ä¸ºï¼š
new SuperType(construction parameters) {
    inner class methods and data 
}
//SuperTypeå¯ä»¥æ˜¯ActionListenerè¿™æ ·çš„æ¥å£ï¼Œäºæ˜¯å†…éƒ¨ç±»å°±è¦å®ç°è¿™ä¸ªæ¥å£ã€‚
//å®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç±»ï¼Œå†…éƒ¨ç±»å°±è¦æ‰©å±•å®ƒ
//åŒ¿åå†…éƒ¨ç±»ç”±äºæ²¡æœ‰åç§°ï¼Œæ‰€ä»¥ä¸èƒ½æœ‰æ„é€ å™¨
//å®é™…ä¸Šï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼æœ€æ–¹ä¾¿
public void start(int interval, boolean beep){
    Timer t = new Timer(interval, event->{
        System.out.println("At the tone, the time is " + new DateO); 
        if (beep) Toolkit.getDefaultToolkit().beep(); 
    })ï¼›
    t.start();
}
//åˆ«å¿˜äº†lambdaä¹Ÿå¯ä»¥è®¿é—®å±€éƒ¨å˜é‡å“¦
```

```java
//å‡ ä¸ªæŠ€å·§å’Œæ³¨æ„äº‹é¡¹
//åŒæ‹¬å·åˆå§‹åŒ–
ArrayList<String> friends = new ArrayList<String>(){//æ”¹å†™äº†ä¹¦ä¸­ä»£ç ï¼Œå¯èƒ½æœ‰é”™
    {add("Harry");add("Tony");}//å®é™…ä¸Šæ·»åŠ äº†æ–°çš„æ„é€ å—ï¼Œè§ç¬¬4ç« 
};
//åœ¨equalsæ–¹æ³•ä¸­ç”¨getClassæ–¹æ³•åšæ£€æµ‹æ—¶ï¼Œå¯¹äºåŒ¿åå†…éƒ¨ç±»æ¥è¯´ä¼šå¤±æ•ˆ
```



### 6.4.7 é™æ€å†…éƒ¨ç±»

```java
//å¯¹äºä¸éœ€è¦å¼•ç”¨å¤–å›´ç±»å¯¹è±¡çš„å†…éƒ¨ç±»ï¼Œå¯ä»¥å£°æ˜ä¸ºä¸ºstatic
//ä¸‹é¢çš„ç±»æ‰¾å‡ºã€ä¿å­˜æœ€å¤§æœ€å°ä¸¤ä¸ªå€¼
class Pair
{
    private double first;
    private double second;
    public Pair(double f, double s)
    {
        first = f;
        second = s;
    }
    public double getFirst(){return first;}
    public double getSecond(){return second;}
}
class ArrayAlg
{
    public static Pair minmax(double[] values)
    {
        ...
        return new Pair(min, max)
    }
}
//ç”±äºPairè¿™ä¸ªåå­—å¤ªå¸¸è§äº†ï¼Œä¸ºäº†è§£å†³å†²çªï¼Œå¯ä»¥æŠŠPairå†™åœ¨ArrayAlgå†…éƒ¨
//ç”±äºPairå¹¶ä¸éœ€è¦å¼•ç”¨å…¶ä»–å¯¹è±¡ï¼Œå¯ä»¥è®¾ä¸ºé™æ€çš„
class ArrayAlg
{
    public static class Pair
    {
       ...
    }
    ....
}
//ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå¿…é¡»ä½¿ç”¨é™æ€å†…éƒ¨ç±»ï¼Œå› ä¸ºå†…éƒ¨ç±»å¯¹è±¡æ˜¯åœ¨é™æ€æ–¹æ³•ä¸­æ„é€ 
/*ä¸ªäººï¼š
  6.4.3ä¸­å†…éƒ¨ç±»æ„é€ å™¨éœ€è¦ä¼ é€’ä¸€ä¸ªå¤–å›´ç±»å¯¹è±¡ï¼›
  6.4.2ä¸­æ„é€ å†…éƒ¨ç±»å®ä¾‹è¯­æ³•ä¸º this.new TimePrinter(),thiså¯çœç•¥å®é™…ä¸Šthiså°±æ˜¯ä¼ ç»™æ„é€    å™¨çš„éšå½¢å‚æ•°ï¼›
  è€Œåœ¨é™æ€æ–¹æ³•ä¸­ï¼Œå¹¶æ²¡æœ‰å®ä¾‹å¯¹è±¡åªæœ‰ç±»ï¼Œæ‰€ä»¥éœ€è¦åœ¨é™æ€æ–¹æ³•ä¸­æ„é€ å¯¹è±¡çš„å†…éƒ¨ç±»éœ€è¦å®šä¹‰ä¸ºé™æ€å†…	   éƒ¨ç±»ï¼›
*/  
//ä¸å¸¸è§„å†…éƒ¨ç±»ä¸åŒï¼Œé™æ€å†…éƒ¨ç±»å¯ä»¥æœ‰é™æ€äºå’Œæ–¹æ³•
//å£°æ˜åœ¨æ¥å£ä¸­çš„å†…éƒ¨ç±»è‡ªåŠ¨å£°æ˜ä¸ºstaticå’Œpublicç±»
```



<hr/>

## 6.5 ä»£ç†

åˆ©ç”¨ä»£ç†å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªå®ç°äº†ä¸€ç»„ç»™å®šæ¥å£çš„æ–°ç±»ã€‚è¿™ç§åŠŸèƒ½åªæœ‰åœ¨ç¼–è¯‘æ—¶æ— æ³•ç¡®å®šéœ€è¦å®ç°å“ªä¸ªæ¥å£æ—¶æ‰æœ‰å¿…è¦ä½¿ç”¨ã€‚å¯¹äºåº”ç”¨ç¨‹åºè®¾è®¡äººå‘˜æ¥è¯´ï¼Œé‡åˆ°è¿™ç§æƒ…å†µçš„æœºä¼šå¾ˆå°‘ï¼Œå¯¹äºç³»ç»Ÿç¨‹åºè®¾è®¡äººå‘˜æ¥è¯´ï¼Œä»£ç†å¸¦æ¥çš„çµæ´»æ€§å´ååˆ†é‡è¦ã€‚

æš‚æ—¶è·³è¿‡ã€‚

<hr/>

# ç¬¬7ç«  å¼‚å¸¸ã€æ–­è¨€å’Œæ—¥å¿—

ç¨‹åºåº”å½“åœ¨å‡ºç°é”™è¯¯æ—¶åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š

1. å‘ç”¨æˆ·é€šå‘Šé”™è¯¯
2. ä¿å­˜æ‰€æœ‰çš„å·¥ä½œç»“æœ
3. å…è®¸ç”¨æˆ·ä»¥å¦¥å–„çš„å½¢å¼é€€å‡ºç¨‹åº

## 7.1 å¤„ç†é”™è¯¯

- ç”¨æˆ·è¾“å…¥é”™è¯¯
- è®¾å¤‡é”™è¯¯ï¼šæ‰“å°æœºæ²¡çº¸ç­‰ç¡¬ä»¶é—®é¢˜
- ç‰©ç†é™åˆ¶ï¼šç£ç›˜æ»¡äº†
- ä»£ç é”™è¯¯

### 7.1.1 å¼‚å¸¸åˆ†ç±»

![image-20200619233553632](../img/image-20200619233553632.png)

- Errorç±»å±‚æ¬¡ç»“æ„æè¿°äº†Javaè¿è¡Œæ—¶ç³»ç»Ÿçš„å†…éƒ¨é”™è¯¯å’Œèµ„æºè€—å°½é”™è¯¯ï¼Œåº”ç”¨ç¨‹åºä¸åº”è¯¥æŠ›å‡ºè¿™ç§ç±»å‹çš„é”™è¯¯
- åœ¨è®¾è®¡Javaç¨‹åºæ—¶ï¼Œéœ€è¦å…³æ³¨Exceptionå±‚æ¬¡ç»“æ„ã€‚å…¶ä¸­çš„RuntimeExceptionæ˜¯ç¨‹åºé”™è¯¯å¯¼è‡´çš„å¼‚å¸¸ï¼›ç¨‹åºæœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œç”±äºIOé”™è¯¯å¯¼è‡´çš„å¼‚å¸¸å±äºIoException
- å¦‚æœå‡ºç°RuntimeExceptionï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯ä½ çš„é—®é¢˜
- æ´¾ç”ŸäºErrorå’ŒRuntimeExceptionçš„å¼‚å¸¸ç§°ä¹‹ä¸ºéå—æŸ¥å¼‚å¸¸ï¼Œå…¶ä½™çš„ç§°ä¹‹ä¸ºå—æŸ¥å¼‚å¸¸

### 7.1.2 å£°æ˜å—æŸ¥å¼‚å¸¸

- ä¸éœ€è¦å£°æ˜Javaçš„å†…éƒ¨é”™è¯¯ï¼Œå³ä»Errorç»§æ‰¿çš„é”™è¯¯ã€‚ä»»ä½•ç¨‹åºä»£ç éƒ½å…·æœ‰æŠ›å‡ºé‚£äº›å¼‚å¸¸çš„æ½œèƒ½ï¼Œè€Œæˆ‘ä»¬å¯¹å…¶æ²¡æœ‰ä»»ä½•æ§åˆ¶èƒ½åŠ›
- æ€»ä¹‹ï¼Œä¸€ä¸ªæ–¹æ³•å¿…é¡»å£°æ˜æ‰€æœ‰å¯èƒ½æŠ›å‡ºçš„å—æŸ¥å¼‚å¸¸ï¼Œè€Œéå—æŸ¥å¼‚å¸¸è¦ä¹ˆä¸å¯æ§åˆ¶(Error)ï¼Œè¦ä¹ˆå°±åº”è¯¥é¿å…å‘ç”Ÿ(RuntimeException)

### 7.1.3 å¦‚ä½•æŠ›å‡ºå¼‚å¸¸

ç”¨throwsã€throwå…³é”®å­—

### 7.1.4 åˆ›å»ºå¼‚å¸¸ç±»

```java
//å®šä¹‰çš„ç±»å‹å½“åŒ…æ‹¬ä¸¤ä¸ªæ„é€ å™¨ï¼Œä¸€ä¸ªé»˜è®¤ï¼Œå¦ä¸€ä¸ªæ˜¯å¸¦æœ‰è¯¦ç»†æè¿°ä¿¡æ¯çš„æ„é€ å™¨
class FileFormatException extends IOException { 
    public FileFormatException() {}
    public FileFormatException(String gripe) { super(gripe); } 
}
```

## 7.2 æ•è·å¼‚å¸¸

### 7.2.1 æ•è·å¼‚å¸¸

try catch è¯­æ³•

### 7.2.1 æ•è·å¤šä¸ªå¼‚å¸¸

### 7.2.2 å†æ¬¡æŠ›å‡ºå¼‚å¸¸ä¸å¼‚å¸¸é“¾

```java
//å°†åŸå§‹å¼‚å¸¸è®¾ä¸ºæ–°å¼‚å¸¸çš„åŸå› 
try 
{
   ...
}
catch (SQLException e)
{
    Throwable se = new ServletException("database error");
    se.initCause(e);
    throw se;
}
```

### 7.2.4 finallyå­å¥

```java
//å½“finallyå­å¥åŒ…å«returnè¯­å¥æ—¶ï¼Œå°†ä¼šå‡ºç°ä¸€ç§æ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œå‡è®¾åˆ©ç”¨returnè¯­å¥ä»tryè¯­å¥å—ä¸­é€€å‡ºã€‚åœ¨æ–¹æ³•è¿”å›å‰ï¼Œfinallyå­å¥çš„å†…å®¹å°†è¢«æ‰§è¡Œã€‚å¦‚æœfinallyå­å¥ä¸­ä¹Ÿæœ‰ä¸€ä¸ªreturnè¯­å¥ï¼Œè¿™ä¸ªè¿”å›å€¼å°†ä¼šè¦†ç›–åŸå§‹çš„è¿”å›å€¼ã€‚
```

### 7.2.5 å¸¦èµ„æºçš„tryè¯­å¥

> ä¸Šä¸€èŠ‚å·²ç»çœ‹åˆ°ï¼Œå¦‚æœ tryå—æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œ è€Œä¸” close æ–¹æ³•ä¹ŸæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè¿™å°±ä¼šå¸¦ æ¥ä¸€ä¸ªéš¾é¢˜.ï¼Œå¸¦èµ„æºçš„ tryè¯­å¥å¯ä»¥å¾ˆå¥½åœ°å¤„ç†è¿™ç§æƒ…å†µã€‚åŸæ¥çš„å¼‚å¸¸ä¼šé‡æ–°æŠ›å‡ºï¼Œè€Œ close æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¼šâ€œ è¢«æŠ‘åˆ¶ï¼… è¿™äº›å¼‚å¸¸å°†è‡ªåŠ¨æ•è·ï¼Œå¹¶ç”± addSuppressed æ–¹æ³•å¢åŠ åˆ°åŸæ¥çš„ å¼‚å¸¸ã€‚

### 7.2.6 åˆ†æå †æ ˆè½¨è¿¹å…ƒç´ 

æ ‡è®°ä¸€ä¸‹ï¼Œä»¥åå†çœ‹

## 7.3 ä½¿ç”¨å¼‚å¸¸æœºåˆ¶çš„æŠ€å·§

1. å¼‚å¸¸å¤„ç†ä¸èƒ½ä»£æ›¿ç®€å•çš„æµ‹è¯•
2. ä¸è¦è¿‡åˆ†åœ°ç»†åŒ–å¼‚å¸¸
3. åˆ©ç”¨å¼‚å¸¸å±‚æ¬¡ç»“æ„
4. ä¸è¦å‹åˆ¶å¼‚å¸¸
5. åœ¨æ£€æµ‹é”™è¯¯æ—¶ï¼Œâ€œè‹›åˆ»â€è¦æ¯”æ”¾ä»»æ›´å¥½
6. ä¸è¦ç¾äºä¼ é€’å¼‚å¸¸

## 7.4 æ–­è¨€

ç•¥è¿‡ï¼Œä»¥åçœ‹

## 7.5 è®°å½•æ—¥å¿—

å¤ªå¤æ‚äº†ï¼Œæ—¶é—´è¾ƒç´§ï¼Œä»¥åå†çœ‹

<hr/>

# ç¬¬8ç«  æ³›å‹ç¨‹åºè®¾è®¡

## 8.1 ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ³›å‹ç¨‹åºè®¾è®¡

> æ³›å‹ç¨‹åºè®¾è®¡æ„å‘³ç€ç¼–å†™çš„ä»£ç å¯ä»¥è¢«å¾ˆå¤šä¸åŒç±»å‹çš„å¯¹è±¡æ‰€å¤ç”¨

### 8.1.1 ç±»å‹å‚æ•°çš„å¥½å¤„

å¯ä»¥é¿å…å‚æ•°è½¬æ¢æ‰€å¸¦æ¥çš„éº»çƒ¦å’Œé”™è¯¯ï¼Œç»™ç¨‹åºå¸¦æ¥æ›´å¥½çš„å®‰å…¨æ€§å’Œå¯è¯»æ€§

### 8.1.2 è°æƒ³æˆä¸ºæ³›å‹ç¨‹åºå‘˜

æˆ‘å¥½åƒä¸å¤ªæƒ³

## 8.2 å®šä¹‰ç®€å•æ³›å‹ç±»

å°–æ‹¬å·æ‹¬ä½æ³›å‹å½¢å‚æ”¾åœ¨ç±»ååé¢å³å¯

```java
public class Pair<T> {
    private T first; 
    private T second;
	public Pair() { first = null; second = null; }
    public Pair(T first, T second) {
        this.first = first; this.second = second; 
    }
	public T getFirst() { return first; } 
    public T getSecond() { return second; }
	public void setFirst(T newValue) { first = newValue; }
    public void setSecond(T newValue) { second = newValue; }
}
```



## 8.3 æ³›å‹æ–¹æ³•

```java
//ä¾‹å¦‚
class ArrayAlg {
    public static <T> T getMiddle(T... a)  //æ³›å‹å½¢å‚æ”¾åœ¨è¿”å›å€¼å‰é¢ï¼Œä¿®é¥°ç¬¦åé¢
    { 
        return a[a.length / 2];
    } 
}
//è°ƒç”¨æ³›å‹æ–¹æ³•æ—¶ï¼Œå¯ä»¥åœ¨æ–¹æ³•åå‰é¢æ”¾ç½®æ–¹æ‹¬å·ï¼Œç„¶åæ”¾å…¥å…·ä½“ç±»å‹
String middle = ArrayAlg.<String>getMiddle("John", "Tom", "lueluelue");
//å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºæ³›å‹ç±»å‹ï¼Œå¯ä»¥çœç•¥å°–æ‹¬å·
String middle = ArrayAlg.getMiddle("John", "Tom", "lueluelue");
//ä¸‹é¢çš„æƒ…å†µä¼šæŠ¥é”™
double middle = ArrayAlg.getMiddle(3.14, 1729, 0);
//é¦–å…ˆç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è£…ç®±ï¼Œç„¶åå¯»æ‰¾å®ƒä»¬çš„è¶…ç±»ï¼Œæœ€åå‘ç°å®ƒä»¬çš„å…±åŒè¶…ç±»æœ‰ä¸¤ä¸ªNumberå’ŒComparable
//ä»è€Œå¼•å‘é”™è¯¯
```

```java
//ä»¥ä¸‹å†…å®¹æ¥è‡ªhttps://blog.csdn.net/briblue/article/details/76736356
//æ³›å‹ç±»ä¸æ³›å‹æ–¹æ³•å…±å­˜ç°è±¡
public class Test1<T>{

	public  void testMethod(T t){
		System.out.println(t.getClass().getName());
	}
	public  <T> T testMethod1(T t){
		return t;
	}
}
//å…¶ä¸­testMethod1æ˜¯ä¸ªæ³›å‹æ–¹æ³•ï¼Œå®ƒçš„ç±»å‹å‚æ•°è™½ç„¶ä¸Test1ç±»çš„ç±»å‹å‚æ•°åå­—ç›¸åŒï¼Œä½†æ˜¯ä¸¤è€…å…¶å®æ˜¯æ¯«æ— å¹²ç³»çš„ä¸¤ä¸ªç±»å‹å‚æ•°
```



## 8.4 ç±»å‹å˜é‡çš„é™å®š

```java
class ArrayAlg
{
	public static <T> T min(T[] a)
    {
        if(a==null||a.length==0) return null;
        T smallest = a[0];
        for(int i=1;i<a.length;i++)
            if(a[i].compareTo(smallest)<0) smallest = a[i];
        return smallest;
    }
}
//ç¨‹åºä¸­è°ƒç”¨äº†compareToæ–¹æ³•ï¼Œå¦‚ä½•ç¡®ä¿aä¸­çš„æˆå‘˜å˜é‡å…·æœ‰compareToæ–¹æ³•å‘¢ï¼Ÿ
//å¯ä»¥æŠŠå®ƒä»¬éƒ½é™å®šä¸ºComparableæ¥å£çš„å­ç±»
public static <T extends Comparable> T min(T[] a)...
//æ— è®ºæ˜¯ç±»è¿˜æ˜¯æ¥å£ï¼Œé™å®šå…³é”®å­—éƒ½ç”¨extends
//å¯ä»¥å¤šé‡é™å®šï¼Œç”¨&è¿æ¥è¶…ç±»æˆ–æ¥å£ï¼Œå¦‚æœæœ‰è¶…ç±»é‚£åªèƒ½æœ‰ä¸€ä¸ªï¼ˆJavaæ²¡æœ‰å¤šé‡ç»§æ‰¿ï¼‰ä¸”è¦æ”¾åœ¨é¦–ä½
```

## 8.5 æ³›å‹ä»£ç å’Œè™šæ‹Ÿæœº

> è™šæ‹Ÿæœºæ²¡æœ‰æ³›å‹ç±»å‹å¯¹è±¡â€”â€”æ‰€æœ‰çš„å¯¹è±¡éƒ½å±äºæ™®é€šç±»

### 8.5.1 ç±»å‹æ“¦é™¤

> **æ³›å‹ä¿¡æ¯åªå­˜åœ¨äºä»£ç ç¼–è¯‘é˜¶æ®µï¼Œåœ¨è¿›å…¥ JVM ä¹‹å‰ï¼Œä¸æ³›å‹ç›¸å…³çš„ä¿¡æ¯ä¼šè¢«æ“¦é™¤æ‰ï¼Œä¸“ä¸šæœ¯è¯­å«åšç±»å‹æ“¦é™¤**
>
> -https://blog.csdn.net/briblue/article/details/76736356

```java
//æ— è®ºä½•æ—¶å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»ï¼Œéƒ½è‡ªåŠ¨æä¾›äº†ä¸€ä¸ªåŸå§‹ç±»å‹
//ä¾‹å¦‚Pairçš„åŸå§‹ç±»å‹
public class Pair { 
    private Object first; 
    private Object second; 
    public Pair(Object first, Object second) 
    { 
        this,first = first; 
        this.second = second;
    }
	public Object getFirst() { return first; } 
    public Object getSecond() { return second; } 
    public void setFirst(Object newValue) { first = newValue; } 
    public void setSecond(Object newValue) { second = newValue; }
}
//Pairçš„Tæ˜¯ä¸ªæ— é™å®šå˜é‡ï¼Œæ‰€ä»¥ç”¨Objectæ›¿æ¢
//è‹¥æœ‰é™å®šï¼Œåˆ™ç”¨ç¬¬ä¸€ä¸ªé™å®šçš„ç±»å‹å˜é‡æ¥æ›¿æ¢
```

### 8.5.2 ç¿»è¯‘æ³›å‹è¡¨è¾¾å¼

> ç¨‹åºè°ƒç”¨æ³›å‹ç±»çš„æ³›å‹æ–¹æ³•æ—¶ï¼Œå¦‚æœæ“¦é™¤è¿”å›ç±»å‹ï¼Œç¼–è¯‘å™¨æ’å…¥å¼ºåˆ¶ç±»è½¬æ¢

```java
//ä¾‹å¦‚ä¸‹é¢çš„è¯­å¥
Piar<Employee> buddies = ...;
Employee buddy = buddies.getFirst()
```

> æ“¦é™¤getFirstçš„è¿”å›ç±»å‹åå°†è¿”å›Objectç±»å‹ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢
>
> ä¹Ÿå°±æ˜¯è¯´ç¼–è¯‘å™¨æŠŠè¿™ä¸ªæ–¹æ³•è°ƒç”¨ç¿»è¯‘æˆä¸¤æ¡è™šæ‹ŸæœºæŒ‡ä»¤
>
> - å¯¹åŸå§‹æ–¹æ³•Pair.getFirstçš„è°ƒç”¨
> - å¯¹è¿”å›çš„Objectç±»å¼ºåˆ¶è½¬æ¢ä¸ºEmployeeç±»å‹

### 8.5.3 ç¿»è¯‘æ³›å‹æ–¹æ³•

```java
//ä¸€ä¸ªæ³›å‹æ–¹æ³•ç¿»è¯‘å°æ —å­
public static <T extends Comparable> T min(T[] a)
//ç¿»è¯‘å
public static Comparable min(Comparable[] a)
```

ç¿»è¯‘æ³›å‹æ–¹æ³•æœ‰æ—¶ä¼šå¼•èµ·å¤šæ€å†²çª

```java
class DateInterval extends Pair<LocalDate>
{
    public void setSecond(LocalDate second)
    {
        //è¦ä¿è¯ç¬¬äºŒä¸ªæ—¥æœŸå¤§äºç¬¬ä¸€ä¸ªæ—¥æœŸ
        if(second.compareTo(getFirst())>=0)
            super.setSecond(second);
    }
    ......
}
//è¿™ä¸ªç±»æ“¦å‡ºåï¼Œå˜æˆ
class DateInterval extends Pair
{
    public void setSecond(LocalDate second){.....}
    ....
}
//ä½†æ˜¯ï¼ï¼ï¼ï¼ç±»ä¸­è¿˜å­˜åœ¨ä»PairåŸå§‹ç±»ä¸­ç»§æ‰¿ä¸‹æ¥çš„æ–¹æ³•
public void setSecond(Object second)
//ä¸ªäººï¼šç›¸å½“äºæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œæ˜¯å½¼æ­¤çš„é‡è½½
//ç„¶åæ‰§è¡Œä¸‹é¢çš„è¯­å¥
DateInterval interval = new DateInterval(...);
Pair<LocalDate> pair = interval;//å‘ä¸Šè½¬å‹
pair.setSecond(aDate);
//ä¸ªäººï¼šé¦–å…ˆpairç¼–è¯‘ç±»å‹ä¸ºçˆ¶ç±»ï¼Œå› æ­¤åªèƒ½è°ƒç”¨çˆ¶ç±»æ‰æœ‰çš„æ–¹æ³•ï¼Œå³å‚æ•°ä¸ºObjectçš„æ–¹æ³•ï¼Œè¿è¡Œæ—¶æ˜¾ç¤ºå­ç±»çš„æ–¹æ³•ç‰¹å¾ï¼Œå³è°ƒç”¨DateIntervalç±»å‚æ•°ä¸ºObjectçš„æ–¹æ³•
//åœ¨æ¥ç€è¯´ï¼Œä¸ºäº†é¿å…å¤šæ€å†²çªï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªæ¡¥æ–¹æ³•
public void setSecond(Object second){setSecond((Date) second);}
//è¿™æ ·è°ƒç”¨å­ç±»çš„å‚æ•°ä¸ºObjectçš„æ–¹æ³•ååˆè°ƒç”¨äº†å­ç±»å‚æ•°ä¸ºLocalDateçš„æ–¹æ³•ï¼ˆæ˜¯ä¸æ˜¯ä¹¦çš„é”™è¯¯æˆ‘ä¹Ÿä¸ç¡®å®šï¼Œä¹Ÿè®¸ä¸åº”è¯¥æ˜¯Dateè€Œæ˜¯LocalDateï¼‰ï¼Œè¿™æ ·å°±è°ƒç”¨äº†æˆ‘ä»¬éœ€è¦çš„æ–¹æ³•
```

> æ€»ä¹‹è¦è®°ä½æœ‰å…³Javaæ³›å‹çš„äº‹å®
>
> - è™šæ‹Ÿæœºä¸­æ²¡æœ‰æ³›å‹ï¼Œåªæœ‰æ™®é€šçš„ç±»å’Œæ–¹æ³•
> - æ‰€æœ‰çš„ç±»å‹å‚æ•°éƒ½ç”¨å®ƒä»¬çš„é™å®šç±»å‹æ›¿æ¢
> - æ¡¥æ–¹æ³•åˆæˆæ¥ä¿æŒå¤šæ€
> - ä¸ºä¿æŒç±»å‹å®‰å…¨æ€§ï¼Œå¿…è¦æ—¶æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢

### 8.5.4 è°ƒç”¨é—ç•™ä»£ç 

> åœ¨è®¾è®¡Javaæ³›å‹æ—¶ï¼Œä¸»è¦ç›®æ ‡æ˜¯å…è®¸æ³›å‹ä»£ç å’Œé—ç•™ä»£ç ä¹‹é—´èƒ½å¤Ÿäº’ç›¸å·¥ä½œ

```java
//çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œè¦è®¾ç½®ä¸€ä¸ªJSlideræ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•
void setLabelTable(Dictionary table)
//ç°åœ¨å¡«å……å­—å…¸æ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨æ³›å‹ç±»å‹
Dictionary<Integer, Component> labelTable = new Hashtable<>();
labelTable.put(0, new JLabel(new ImageIcon("nine.gif")));
slider.setLabelTable(labelTable);
/*ç»™æ–¹æ³•ä¼ å‚æ—¶ï¼Œç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šï¼ˆä¸ªäººè§‰å¾—å®šä¹‰æ–¹æ³•æ—¶å‚æ•°æ²¡æœ‰ä½¿ç”¨æ³›å‹ï¼‰ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•ç¡®å®šæ–¹æ³•ä¼šå¯¹å­—å…¸åšä»€ä¹ˆæ“ä½œï¼Œæ¯”å¦‚ç”¨å­—ç¬¦ä¸²æ›¿æ¢å­—å…¸ä¸­çš„å…³é”®å­—ï¼Œæ‰“ç ´ç±»å‹é™åˆ¶*/
//ä½†æ˜¯å®é™…ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•åªä¼šæŸ¥çœ‹å­—å…¸ä¸­çš„ä¿¡æ¯ï¼Œå› æ­¤å®Œå…¨å¯ä»¥å¿½ç•¥è­¦å‘Š
//è¿˜å¯ä»¥ä»æ–¹æ³•ä¸­è·å¾—æ³›å‹å®ä¾‹
Dictionary<Integer, Components>labelTable = slider.getLabelTable(); // Warning
//ç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šï¼Œéœ€è¦ç¡®ä¿æ ‡ç­¾è¡¨çš„ç±»å‹æ˜¯Integerå’ŒComponent
//åªè¦è‡ªå·±æ¸…æ¥šé‡Œé¢ä¸ä¼šæœ‰åˆ«çš„ç±»å‹å°±å¯ä»¥ä¸ç”¨å¤ªå…³æ³¨è¿™ä¸ªè­¦å‘Šï¼ˆä¸ªäººï¼‰
//å¯ä»¥ç”¨æ³¨è§£ä½¿è­¦å‘Šæ¶ˆå¤±ï¼Œæ”¾åœ¨ä»£ç å‰
@SuppressWarnings("unchecked")
Dictionary<Integer, Components>labelTable = slider.getLabelTable(); // No warning
//æˆ–è€…æ ‡æ³¨æ•´ä¸ªæ–¹æ³•
@SuppressWarnings("unchecked") 
public void configureSlider() { . . . } 
```

## 8.6 çº¦æŸä¸å±€é™æ€§

> é˜è¿°ä½¿ç”¨ Java æ³›å‹æ—¶éœ€è¦è€ƒè™‘çš„ä¸€äº›é™åˆ¶ã€‚å¤§å¤šæ•°é™åˆ¶éƒ½æ˜¯ç”±**ç±»å‹æ“¦é™¤**å¼•èµ·çš„ã€‚
>
> é‡ç‚¹ï¼Œç±»å‹æ“¦é™¤

### 8.6.1 ä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹å®ä¾‹åŒ–ç±»å‹å‚æ•°

å°±æ˜¯ä¸èƒ½ç”¨intè€Œè¦ç”¨Integerç­‰ç­‰

### 8.6.2 è¿è¡Œæ—¶ç±»å‹æŸ¥è¯¢åªé€‚ç”¨äºåŸå§‹ç±»å‹

```java
Pair<String> stringPair = . .
Pair<Employee> employeePair = . . 
if (stringPair.getClass() == employeePair.getClass()) // they are equal 
//ä»–ä»¬çš„ç±»å‹éƒ½æ˜¯åŸå§‹ç±»å‹ï¼Œä¹Ÿåªæœ‰åŸå§‹ç±»å‹rè¯¦è§ç±»å‹æ“¦é™¤
//è¿™ç§ç±»å‹æ£€æµ‹ä¹Ÿæ˜¯é”™è¯¯çš„
if (a instanceof Pair<String>) // Error
if (a instanceof Pair<T>) // Error
Pair<String> p = (Pair<String>) a; // Warning-can only test that a is a Pair
```

### 8.6.3 ä¸èƒ½åˆ›å»ºå‚æ•°åŒ–ç±»å‹æ•°ç»„

```java
//ä¾‹å¦‚
Pair<String>[] table = new Pair<String>[10]; // Errorï¼Œè¿™ä¸€æ­¥ä¼šç¼–è¯‘æŠ¥é”™
//ç„¶åè¿›è¡Œä¸‹åˆ—æ“ä½œ
Object[] objarry = table;
//ä¸‹é¢è¿™æ¡æŒ‡ä»¤ä¼šæŠ›å‡ºArrayStoreExceptionå¼‚å¸¸
objarry[0] = "123";
//ä½†æ˜¯å¯¹äºæ³›å‹ç±»å‹ï¼Œç”±äºç±»å‹æ“¦é™¤çš„åŸå› ï¼Œä¼šä½¿è¿™ç§æœºåˆ¶æ— æ•ˆï¼ˆä¸ªäººï¼šéƒ½æ“¦é™¤æˆObjectäº†ï¼Œéƒ½æˆä¸€æ ·çš„
//ä¸‹é¢çš„è¯­å¥å¯ä»¥é€šè¿‡å‚¨å­˜æ£€æŸ¥ï¼Œä½†æ˜¯ä»ä¼šå¯¼è‡´ä¸€ä¸ªç±»å‹é”™è¯¯
//è§ä¹¦ç¬¬åç‰ˆ322é¡µï¼šå› ä¸ºæ•°ç»„å­˜å‚¨åªä¼šæ£€æŸ¥æ“¦é™¤çš„ç±»å‹
objarray[0] = new Pair<Employee>();
//ä½†æ˜¯å…è®¸å£°åæ³›å‹æ•°ç»„ï¼Œä½†æ˜¯ä¸èƒ½åˆå§‹åŒ–
//å¯ä»¥å£°æ˜é€šé…ç±»å‹æ•°ç»„ï¼Œç„¶åå¼ºåˆ¶è½¬æ¢
Pair<String>[] table = (Pair<String>[]) new Pair<?>[10];
//ä½†æ˜¯ä»ä¸å®‰å…¨
table[0] = new Pair<Employee>();
table[0].getFirst().toUpperCase() //ä¼šæŠ¥é”™
//å¦‚æœè¦æ”¶é›†å‚æ•°åŒ–ç±»å‹å¯¹è±¡ï¼Œåªæœ‰ä¸€ç§å®‰å…¨æœ‰æ•ˆçš„æ–¹æ³•ï¼›ä½¿ç”¨ArrayList
ArrayList<Pair<String>> //ä¸å¤ªæ‡‚ä¸ºä»€ä¹ˆåªèƒ½ç”¨è¿™ä¸ª
    
//å¯ä»¥çœ‹çœ‹åšå®¢ä¸­çš„ç›¸å…³å†…å®¹ï¼Œè¿æ¥è´´åœ¨ç±»å‹æ“¦é™¤é‚£é‡Œäº†
```

### 8.6.4 Varargsè­¦å‘Š

```java
public static <T> void addAll(Collections coll, T... ts) {
	for (t : ts) 
        coll.add(t); 
}
//åº”è¯¥è®°å¾—ï¼Œå®é™…ä¸Šå‚æ•° ts æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æä¾›çš„æ‰€æœ‰å®å‚ã€‚ç°åœ¨è€ƒè™‘ä»¥ä¸‹è°ƒç”¨
Col1ection<Pair<String> table = . . .; 
Pair<String> pairl = ...; 
Pair<String> pair2 = . . 
addAll(table, pairl, pair2); 
//è¿™ä¼šå»ºç«‹ä¸€ä¸ªPiar<String>æ•°ç»„ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šæ”¾æ¾é™åˆ¶ï¼Œåªä¼šè­¦å‘Šä¸ä¼šæŠ¥é”™
//å¯ä»¥ç”¨@SuppressWarnings("unchecked")æˆ–è€…@SafeVarargsæŠ‘åˆ¶è­¦å‘Š
```

### 8.6.5 ä¸èƒ½å®ä¾‹åŒ–ç±»å‹å˜é‡

```java
//ä¸èƒ½ä½¿ç”¨åƒ new T(...)ï¼Œnew T[...] æˆ– T.class è¿™æ ·çš„è¡¨è¾¾å¼ä¸­çš„ç±»å‹å˜é‡ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ Pair<T> æ„é€ å™¨å°±æ˜¯éæ³•çš„ï¼š 
public Pair() { first = new T(); second = new T(); } // Error 
//ç±»å‹æ“¦é™¤ä¼šå°†Tæ”¹å˜æˆObject
//å¯ä»¥è¿™ä¹ˆåš
public static <T> Pair<T> makePair(Class<T> cl) { 
    try {
        return new Pair<>(c1.newInstance(),cl.newInstance());
    } 
    catch (Exception ex) { return null; } 
} 
```

### 8.6.6 ä¸èƒ½æ„é€ æ³›å‹æ•°ç»„

```java
public static <T extends Comparable> T[] minmax(T[] a) {
    T[] mm = new T[2];
    ...
} // Error
// ç”±äºç±»å‹æ“¦é™¤çš„åŸå› ï¼Œæ°¸è¿œåªä¼šæ„å»ºComparable[2]æ•°ç»„
```

å‰©ä¸‹çš„æœ‰ç‚¹å¤æ‚ï¼Œä»¥åå†çœ‹

### 8.6.7 æ³›å‹ç±»åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­æ— æ•ˆ

çœ‹ä¸æ‡‚ï¼Œå…ˆç•™ç€

### 8.6.8 ä¸èƒ½æŠ›å‡ºæˆ–æ•æ‰æ³›å‹ç±»å®ä¾‹

å·¥ä½œä¸­ç”¨åˆ°äº†å†æ¥ç†Ÿæ‚‰

### 8.6.9 å¯ä»¥æ¶ˆé™¤å¯¹å—æŸ¥å¼‚å¸¸çš„æ£€æŸ¥

å·¥ä½œåå†æ¥çœ‹

### 8.6.10 æ³¨æ„æ“¦é™¤åçš„å†²çª

çœŸæ»´çœ‹ä¸æ‡‚ ğŸ˜­

## 8.7 æ³›å‹ç±»å‹çš„ç»§æ‰¿è§„åˆ™

æ— è®ºSå’ŒTä¹‹é—´æœ‰ä»€ä¹ˆè”ç³»ï¼Œé€šå¸¸ï¼ŒPair\<S\>å’Œ\<T\>ä¹‹é—´æ²¡ä»€ä¹ˆè”ç³»

## 8.8 é€šé…ç¬¦ç±»å‹

è¯¦æƒ…è§ä¸Šé¢æ¨èçš„åšå®¢å§ï¼Œæˆ‘çœŸçš„ä¸æƒ³å†™äº†

## 8.9 åå°„å’Œæ³›å‹

### 8.9.1 æ³›å‹Classç±»

Classç±»æ˜¯æ³›å‹çš„ï¼Œä¾‹å¦‚ï¼ŒString.classå®é™…ä¸Šæ˜¯ä¸€ä¸ªClass<String\>ç±»çš„å¯¹è±¡ï¼ˆå®é™…ä¸Šï¼Œæ˜¯å”¯ä¸€çš„å¯¹è±¡ï¼‰

### 8.9.2 ä½¿ç”¨Class<T\>å‚æ•°è¿›è¡Œç±»å‹åŒ¹é…

```java
public static <T> Pair<T> makePair(Class<T> cl) throws InstantException,
	IllegalAccessException
{
    return new Pair<>(cl.newInstance(), cl.newInstance());
}
makePair(String.class);
```

### 8.9.3 è™šæ‹Ÿæœºä¸­çš„æ³›å‹ç±»å‹ä¿¡æ¯

æœ‰å·¥ä½œéœ€è¦å†çœ‹å§ï¼Œç°åœ¨çœ‹çš„ä¸€å¤´é›¾æ°´

<hr/>

# ç¬¬9ç«  é›†åˆ

